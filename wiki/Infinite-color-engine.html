
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://wiki.hyperhdr.eu/Infinite-color-engine.html">
      
      
        <link rel="prev" href="HyperSerial.html">
      
      
        <link rel="next" href="Compiling-HyperHDR.html">
      
      
        
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Infinite Color Engine üÜï - HyperHDR Wiki</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/overrides.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#what-is-the-infinite-color-engine" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="HyperHDR Wiki" class="md-header__button md-logo" aria-label="HyperHDR Wiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HyperHDR Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Infinite Color Engine üÜï
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="HyperHDR Wiki" class="md-nav__button md-logo" aria-label="HyperHDR Wiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    HyperHDR Wiki
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Getting-started.-Needed-components.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting started. Needed components
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Software installation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Software installation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Installation#windows" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LibreELEC.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LibreELEC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Installation#debian-and-ubuntu-apt-repository" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux/Debian&Ubuntu repository
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Installation#hyperhdr-custom-raspberry-pi-os-distribution" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux/RaspberryPi SD card
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Installation#linux" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux/general
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Installation#macos" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    macOS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Configurations
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Configurations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Quick-start.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LUT-calibration.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Video source LUT calibration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="P010-video-format.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P010 high quality video format
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Automatic-tone-mapping.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Automatic tone mapping
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Software-screen-capture.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Software screen capture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Audio-reactive.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Audio-reactive lighting effects
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Raspberry-Pi-5-PWM.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Raspberry Pi 5 GPIO PWM üÜï
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Zigbee2MQTT-lights.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zigbee2MQTT lights
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Home-Assistant-lights.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home Assistant lights
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="JSON-API.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JSON API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Instance-synchronization.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Instance synchronization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Hue-Entertainment-API-v2.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hue gradient light strips
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="HyperSerial.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HyperSerialPico and others
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Infinite Color Engine üÜï
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="Infinite-color-engine.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Infinite Color Engine üÜï
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-the-infinite-color-engine" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is the Infinite Color Engine?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-does-this-mean-in-practice" class="md-nav__link">
    <span class="md-ellipsis">
      
        What Does This Mean in Practice?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hardware Support
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-infinite" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why ‚ÄúInfinite‚Äù?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-smoothing-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      
        New smoothing algorithms
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infinite-color-engine-24-bit-anti-flickering-filter-v22beta2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Infinite Color Engine: 24-bit Anti-Flickering Filter (v22beta2)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#processing-pipeline-before--now" class="md-nav__link">
    <span class="md-ellipsis">
      
        Processing Pipeline (Before ‚Üí Now)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-post-processing-pipeline-before--now" class="md-nav__link">
    <span class="md-ellipsis">
      
        The post-processing Pipeline (Before ‚Üí Now)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The post-processing Pipeline (Before ‚Üí Now)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#old-approach-24-bit-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        Old approach (24-bit pipeline)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-approach-float3-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        New approach (float3 pipeline)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Compiling-HyperHDR.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Compiling HyperHDR
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="FAQ.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Level-Shifter.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3.3V to 5V level shifter
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Raspberry-Pi-OS-read-only-mode.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Raspberry Pi OS read-only mode
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-the-infinite-color-engine" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is the Infinite Color Engine?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-does-this-mean-in-practice" class="md-nav__link">
    <span class="md-ellipsis">
      
        What Does This Mean in Practice?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hardware Support
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-infinite" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why ‚ÄúInfinite‚Äù?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-smoothing-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      
        New smoothing algorithms
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infinite-color-engine-24-bit-anti-flickering-filter-v22beta2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Infinite Color Engine: 24-bit Anti-Flickering Filter (v22beta2)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#processing-pipeline-before--now" class="md-nav__link">
    <span class="md-ellipsis">
      
        Processing Pipeline (Before ‚Üí Now)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-post-processing-pipeline-before--now" class="md-nav__link">
    <span class="md-ellipsis">
      
        The post-processing Pipeline (Before ‚Üí Now)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The post-processing Pipeline (Before ‚Üí Now)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#old-approach-24-bit-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        Old approach (24-bit pipeline)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-approach-float3-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        New approach (float3 pipeline)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Infinite Color Engine üÜï</h1>

<h2 id="what-is-the-infinite-color-engine">What is the Infinite Color Engine?<a class="headerlink" href="#what-is-the-infinite-color-engine" title="Permanent link">&para;</a></h2>
<p>In short, it marks a <strong>clean break from the old 24-bit color space</strong>, moving to <strong>floating-point precision</strong> while still maintaining performance.  </p>
<p>You might ask: <em>Why bother, if most sources don‚Äôt provide more than 24-bit color, except perhaps the P010 format?</em>  </p>
<p><strong>Well, here‚Äôs the thing:</strong><br />
such sources have always been available - even with something as basic as a cheap MS2109 grabber or flatbuffers external source. 
In our application, when averaging colors for each LED, we‚Äôve always had access to a high-precision theoretical color space. 
Until now, that precision was being <strong>brutally truncated</strong> to 24-bit.</p>
<p>Another hidden ‚Äúsource‚Äù of precision has long been <strong>smoothing</strong>, which interpolates intermediate colors.  </p>
<p>This entire subsystem has now been rewritten to handle <strong>floating-point numbers</strong> at both input and output.  </p>
<hr />
<h2 id="what-does-this-mean-in-practice">What Does This Mean in Practice?<a class="headerlink" href="#what-does-this-mean-in-practice" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>The obvious: using the possibilities of lamps that offer support for an extended color palette</strong>  </li>
<li>Reduced banding, noise, and flicker  </li>
<li>More stable color transitions across frames  </li>
<li>Smoother post-processing corrections  </li>
</ul>
<p>Previously, when the final averaged color happened to fall on the boundary between two integers, even tiny changes in the source could trigger sudden jumps between frames.  </p>
<p>By switching to floating-point, this issue has been <strong>drastically minimized</strong>.</p>
<hr />
<h2 id="hardware-support">Hardware Support<a class="headerlink" href="#hardware-support" title="Permanent link">&para;</a></h2>
<p>Extended color support is now available in drivers for:</p>
<ul>
<li>All Philips Hue lamps using the <strong>Entertainment API (v1 &amp; v2)</strong>  </li>
<li><strong>LIFX lamps</strong></li>
<li><strong>HD108</strong>  </li>
</ul>
<hr />
<h2 id="why-infinite">Why ‚ÄúInfinite‚Äù?<a class="headerlink" href="#why-infinite" title="Permanent link">&para;</a></h2>
<p>The name isn‚Äôt just marketing.<br />
The Infinite Color Engine works with a <strong>color palette of 1.24 √ó 10¬≤‚Å∑ possible values</strong>.<br />
For comparison:<br />
- Old 24-bit color: <strong>1.67 √ó 10‚Å∑ values</strong><br />
- New floating-point engine: <strong>1.24 √ó 10¬≤‚Å∑ values</strong>  </p>
<p>The difference is, quite literally, astronomical. üåå</p>
<hr />
<h2 id="new-smoothing-algorithms">New smoothing algorithms<a class="headerlink" href="#new-smoothing-algorithms" title="Permanent link">&para;</a></h2>
<p>In addition to the transition to floating-point numbers, the focus was on adding parameters that control the abruptness of color changes (brightness limiter or averaging with the previous frame) and adding the ability to work in the YUV space, not just RGB.</p>
<table>
<thead>
<tr>
<th>Title</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Linear Interpolator</td>
<td>The Linear Interpolator is an adaptation of a legacy algorithm from previous HyperHDR versions, rewritten to use floating-point arithmetic for higher precision. It works by linearly interpolating the current color towards a target color, ensuring the transition completes over a defined duration regardless of the frame rate. Its key characteristic is the ability to smoothly retarget mid-animation, initiating a new, full-duration transition from its current state toward the new goal.</td>
</tr>
<tr>
<td>RGB Infinite Interpolator</td>
<td>This algorithm smoothly animates RGB colors over a set duration, offering two distinct modes for the transition. The first is a direct linear interpolation for a straight path between colors, while the second is a smoothed mode where the current color gracefully 'chases'' the target to create an ease-in/ease-out effect. A key feature is its ability to intelligently rescale an animation's duration when interrupted, ensuring a perceptually constant speed of change.</td>
</tr>
<tr>
<td>YUV Infinite Interpolator</td>
<td>This algorithm smoothly interpolates colors by operating in the YUV color space for more perceptually uniform transitions. Its main feature is limiting the rate of luminance change in each step, preventing sudden, jarring flashes of brightness. This ensures a visually pleasing effect, even if it extends the animation beyond its initially set duration to maintain that smoothness.</td>
</tr>
<tr>
<td>Hybrid Physics Infinite Interpolator RGB <strong>(default)</strong></td>
<td>This algorithm smoothly transitions between colors using a hybrid physical model. A linear 'pacer' defines the direct path and timing to the target color, while the actual output color follows this pacer like an object attached to a damped spring. This two-part approach creates fluid, natural-looking animations with customizable inertia and overshoot, all while operating in the RGB color space.</td>
</tr>
<tr>
<td>Hybrid Physics Infinite Interpolator YUV</td>
<td>Version of Hybrid Physics Infinite Interpolator that works in the YUV colorspace where you can apply brightness limit.</td>
</tr>
<tr>
<td>Exponential Infinite Interpolator</td>
<td>Classic exponential implementation of smoothing updates LED colors toward a target, reacting quickly to large differences and slowing as they approach the target, producing smooth, natural ambient lighting transitions.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="infinite-color-engine-24-bit-anti-flickering-filter-v22beta2">Infinite Color Engine: 24-bit Anti-Flickering Filter (v22beta2)<a class="headerlink" href="#infinite-color-engine-24-bit-anti-flickering-filter-v22beta2" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>New smoothing architecture rewritten from scratch to leverage a high-precision float pipeline. </p>
</li>
<li>
<p>Replaces legacy integer-based delta blocking, which often "froze" slow transitions because it couldn't perceive sub-integer movement between steps.</p>
</li>
<li>
<p>Implements RGB hysteresis on floating-point values: ensures the engine "sees" the full trajectory of a color, only committing an update when it's certain to land on a stable new 8-bit level.</p>
</li>
<li>
<p>Uses coordinated updates (max-delta) instead of per-channel blocking to maintain perfect hue integrity and prevent chromaticity shifts during ultra-slow fades.</p>
</li>
<li>
<p>Exceptionally effective when paired with inertia-based smoothing, such as the Hybrid Physics Infinite Interpolator RGB, where it stabilizes high-precision physical motion on standard LED hardware.</p>
</li>
<li>
<p>Automatically bypassed for deep-color or high-precision drivers (e.g., HD108, LIFX, or Philips Hue in Entertainment Mode) that don't suffer from 8-bit quantization limits.</p>
</li>
</ul>
<hr />
<h2 id="processing-pipeline-before--now">Processing Pipeline (Before ‚Üí Now)<a class="headerlink" href="#processing-pipeline-before--now" title="Permanent link">&para;</a></h2>
<p>‚¨áÔ∏è <strong>1. Video Frame Area Averaging for LED</strong><br />
- <strong>Before:</strong> color (float) truncated to 24-bit at output<br />
- <strong>Now:</strong> output remains as float  </p>
<p>‚¨áÔ∏è <strong>2. Post-Processing</strong><br />
- <strong>Before:</strong> received, processed in pipeline, and output 24-bit color. some functions, such as changing luminance or saturation, could use float, but they still received and output 24-bit color<br />
- <strong>Now:</strong> both processing and input/output work on float colors  </p>
<p>‚¨áÔ∏è <strong>3. Smoothing</strong><br />
- <strong>Before:</strong> input/output in 24-bit color, internal processing on float<br />
- <strong>Now:</strong> input, processing, and output all on float colors  </p>
<p>‚¨áÔ∏è <strong>4. LED Drivers</strong><br />
- <strong>Before:</strong> always received and rendered 24-bit color<br />
- <strong>Now:</strong> if the device supports it (Philips Hue, HD108) ‚Üí rendering at higher precision;<br />
  otherwise ‚Üí fallback to 24-bit rendering  </p>
<hr />
<h2 id="the-post-processing-pipeline-before--now">The post-processing Pipeline (Before ‚Üí Now)<a class="headerlink" href="#the-post-processing-pipeline-before--now" title="Permanent link">&para;</a></h2>
<h4 id="old-approach-24-bit-pipeline">Old approach (24-bit pipeline)<a class="headerlink" href="#old-approach-24-bit-pipeline" title="Permanent link">&para;</a></h4>
<ul>
<li>Operated directly on <strong>8-bit nonlinear sRGB values</strong>.  </li>
<li>Every transformation (brightness, per-channel gamma, calibration, temperature, backlight) worked on already quantized integers ‚Üí <strong>rounding/precision loss</strong> at every step.  </li>
<li><strong>Per-channel gamma correction</strong> was not equivalent to standard gamma adjustment, and could distort hues üò¨.  </li>
<li>Input being <strong>nonlinear</strong> made operations like calibration and saturation adjustment less accurate (they are meant to be done in linear space).  </li>
</ul>
<h4 id="new-approach-float3-pipeline">New approach (float3 pipeline)<a class="headerlink" href="#new-approach-float3-pipeline" title="Permanent link">&para;</a></h4>
<ul>
<li>Operates first in <strong>linear sRGB space with float precision</strong> ‚Üí avoids cumulative rounding errors.  </li>
<li><strong>Color temperature applied first</strong>: tinting works best before calibration so that calibration LUT/matrix can correct consistently.  </li>
<li><strong>Calibration in colorspace applied in linear domain</strong> ‚Üí mathematically correct, ensures LUT/matrix is used as designed.  </li>
<li><strong>Scale color output</strong> (user parameter)  </li>
<li><strong>Convert back to nonlinear sRGB only once</strong>: avoids repeated conversions and precision loss.  </li>
<li><strong>Global user gamma correction applied consistently on all channels</strong> ‚Üí perceptually uniform adjustment ‚úÖ.  </li>
<li><strong>Brightness and saturation after calibration</strong>: adjusting perceptual properties after ensuring primaries are correct.  </li>
<li><strong>Minimal backlight last</strong>: guarantees final safety floor regardless of prior adjustments.  </li>
<li><strong>Limit power output</strong>:  scale down only if the power limit (user parameter) is exceeded</li>
</ul>
<p>üëâ Overall: the new pipeline is much more <strong>accurate, perceptually consistent, and scientifically correct</strong>. The old one was simpler but mathematically flawed.  </p>
<table>
<thead>
<tr>
<th>Old approach (24-bit)</th>
<th>New approach (float3)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Input</strong>: sRGB <strong><em>nonlinear</em></strong> üò¨ (24-bit).<br>All further steps already lose accuracy due to rounding üò¨</td>
<td><strong>Input</strong>: sRGB <em>linear</em> (float3).<br>Correct starting point for calibration &amp; math ‚úÖ</td>
</tr>
<tr>
<td><strong>Steps</strong>:<br>1. Apply Brightness &amp; Saturation<br>2. Apply User Gamma <strong>per channel</strong> üò¨<br>3. Calibrate in Colorspace (on nonlinear data üò¨)<br>4. Apply Color Temperature<br>5. Apply Minimal Backlight</td>
<td><strong>Steps</strong>:<br>1. Apply Color Temperature (before calibration ‚úÖ)<br>2. Calibrate in Colorspace (linear domain ‚úÖ)<br>3. Scale color output (user parameter ‚úÖ)<br>4. Convert to nonlinear sRGB (only once ‚úÖ)<br>5. Apply User Gamma (global, consistent ‚úÖ)<br>6. Apply Brightness &amp; Saturation (perceptual ops ‚úÖ)<br>7. Apply Minimal Backlight (final floor ‚úÖ) <br>8. Limit power output (scale down only if the power limit is exceeded ‚úÖ)</td>
</tr>
<tr>
<td><strong>Output</strong>: sRGB <em>nonlinear</em> (24-bit).</td>
<td><strong>Output</strong>: sRGB <em>nonlinear</em> (float3 ‚Üí quantized later).</td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": ".", "features": [], "search": "assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>